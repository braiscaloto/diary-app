import React, { useEffect, useRef } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { activeNote } from '../../actions/notes';

import { useForm } from '../../hooks/useForm';
import { NotesAppBar } from './NotesAppBar';

export const NoteScreen = () => {
	const dispatch = useDispatch();
	const { active: note } = useSelector((state) => state.notes);
	const [formValues, handleInputChange, reset] = useForm(note);

	const { body, title } = formValues;
	const activeId = useRef(note.id);

	useEffect(() => {
		if (note.id !== activeId.current) {
			reset(note);
			activeId.current = note.id;
		}
	}, [note, reset]);

	useEffect(() => {
		dispatch(activeNote(formValues.id, { ...formValues }));
	}, [formValues, dispatch]);

	return (
		<div className='notes__main-content'>
			<NotesAppBar />
			<div className='notes__content'>
				<input
					type='text'
					placeholder='Your awesome title'
					className='notes__title-input'
					autoComplete='off'
					name='title'
					value={title}
					onChange={handleInputChange}
				></input>
				<textarea
					placeholder='What happened today?'
					className='notes__textarea'
					value={body}
					name='body'
					onChange={handleInputChange}
				></textarea>
				{note.url && (
					<div className='notes__image'>
						<img
							src='data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMTEhUTEhMVFhUXFRUXFxYYFRUVFxgVFxUXFhYVFhUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGi0lHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAADBAACBQEGB//EADcQAAEDAgQDBgYCAQQDAQAAAAEAAhEDIQQSMUEFUWETInGBkaEGMkKxwfAU0fEHcrLhYoKiI//EABkBAAMBAQEAAAAAAAAAAAAAAAECAwAEBf/EACURAAICAgICAQQDAAAAAAAAAAABAhEDIRIxBEETIiMyUQUzkf/aAAwDAQACEQMRAD8A3XBRtMpzswo9wC6aJWIjBErpwKYbiFY1krig8mCp4VR9JNU3KtQLcTWDo0QUyMKEASiscUUgBW0AERrQlH14XBiVrRqYxXeAkDi1K9WV2jhZutaZqo5/LlCqSU83DBXNIBajWZjaJTmHw4VnhdBKm4odMba4BVc5LZHFQNITJitBHoWVSoShZXFFmQ3TYCiuptSDaTkWCsjMvUICVe9Sq5LuqISYYo5XYSi4Sgd0ShVBTTHhKknsLbRxrYVnYgIFZ86ITGxqmoFjLSSuVKZhGoPajdoE1C2ZtOiRqigqYyuAk6daUtDWOQFwkJCtiMqEzGShdBof7VdWcXldTCmk8GVx9KUdoVixPYlCzaK6aSYyrgQCUywrMZKvllEY2FqNZVrQEOtU5IzgqhoTAMuqwkrowzlouaFztQlaCmItoFNtqQFx1cIjGAoKNBcjrKkrrl0UVOxKNAsoIRQQuDCpilhAebjyAStpdjJWLuqKhctihRZoaR82n7oj+HU3aAt/eS535UE6ZRYZNWjDMIYfC1a3C3C4GYdAk+zAN9VeE4z3FkpRcewHbHkr3KKWhdDgFQURqYYlLuwZlPvxQCSOPElK6YysoKMFHdTMWSGK4iAUxhOKNIhKqG2DpZwTIQsViSm34xqxeI11npAQ2zF21TFPEyFgsqyE/gqTkFILiO1AXKtKmRZMMZCu1wlVTQlCr8MSpTwMLQfUAQRiBKNIFsXNNRHc4LqFBsK+rCIzEyqVQCAqAAFLtB0HdWQn4iEGqTNkA0nIBNTCulMQsfCVyLFPMrIRmZxGnBUcVTOquY46BVtISgeIcYWfUzHRa5wbvqj1XaWFA1hK5IKR59lN8rRoF6120B0XcjUNBB4ZpKOSB1KDUqzYKBkam6W2ai5qX5nroFHY8ts3+h6BJ1qo0GiGClaT7DZo/wAlzhc/dJvqGdkF9SOaA6vKypG2a+BxZmAYPldahqtqWqNBMa6H1Xl6LyTZbjH92/L9K4fJglK1pnTidqmLcSwD2Aupy5o1H1D+1iMxxdZok8hdetwdW2spbFYFodnZDZ+aABzMo4vOaXGf+mn46e4nlKrnAkOBaeRBB9ClHXJuvW4ilTrth5IDXCHDXkR4FBocFwrXTmc7oSnWdzV0B41E8ZXwxJRKGAcvdtwGF5HwlO0aWH0yBP8AKktpi8H6Z4SjgnFWfwgu1XvKnC6Trt7vhp6LLx3Dn0zI7zeY28U+PyMc/pvYsscls81S4LC1MPgYCYa5Ga8Lo4krFjQSlXDHZaVWsAhiuCg0ZMznMMaKUcJdazcpXczVkzMQ/iqJ0kLicUy8PVzQFMSb2QcNh3BNHDmyTY+guGZaYVnVAjDSEAYYp/Qph4+vldZO4CsXBExHCC4pihR7JkDWVBxqVleWhoOAFxdUqYo6BLVKlwEvUqwT0FlmwUN1K5nVUdiEmyTJMiYQq9W/QWjmUrZqGKmNjQydgtKgMre94nx5LI4XSzvmIDfutnF0u5G/4TLqwPsRdxxjXhsRNgb68idimu3LhIsP3deWxfDHOeJ+QTMa6WHrC9JhqWRjG3MAC5v67rJmaKlt1R1e8BXrOcGOLRLoMDSTsJXiMF8RV6lQ0atA0n3gjMQY6kdR6+us1HsKmJBhLVcREIAq5RO+3pdM4Og6sMzTYct0rkoq2FK3omHxYza+a9PQrB7Wt3LTB6jYnqPsvCYyk8Nc5jS4tDoGhJ5f5RPgWrxJ1Rxr5G04kiJPMZSDaLc1z542rLYnTo9nga0Agp+rTzsc07ghZAqjtXAfpWrg3S0eC4c0K2dOOQhUwD+zcynE21toQY8bLCZXcDDrEWI3BXtGiCs7jnCu1Gdlnj/6HLxT4M3F0/YuTHe0Yra5KapYgrJDzorYPE5vWPNdtnPR6GhjSDrZbOFxIcIXlGuWpg6265M8Ey0H6GOLcPEZ2eY/IWOGr0tOrIWDi6OR5jxAXV4nkSa4S9Ec2FJ2hWpTStV8LQoUZNyluKYWBIXY5WiKjTE62JJb3SrYTEHcrILnXARsC85gOqi5NSKKKaPSAqLrG2UXVyIUU7QDZdFYIZplxhSnh4MFTTY7SDNriYVnYkBR9AKrKGsphdF2YkESEhUeiAASlnqUpDpHEEMguJjW3+EQn2QSADrOkBTsagdWu6+YEeKQxb8ovDs2gTNZwdMm10HA4XtKzby1ozf0h3oJ6Pg+GFOmOf5Rqj0R9rcku9W6RLsrWo789lf+lesEKm6x8Ur0Mge6CaAzE9JTJaqvEArIzMDHgzDZB1/fZaPBKhBlhEjVnMam3vZLYgwCSluE8Sp0qvee2CefNDLC4sMJVI9pw/BtLjMFrxItzOh6hI4h3ZMcxut5PsFr4elBBGhuFlcVwxDyDuSR4Ergxu502dMtLQrgLvB6r0WHbYLIwFIb76LXDsozHfRS8qVsfCqQTNdFa9ApKxK5m9FqPO/EuD7N4qN+V5uOTlm4eA4wPmv5r1vFqHaUHjeJHiLrxWHfC7cOTlEhOFM1qf5T2HCz8O5P0HJpvQsUa+GNlk8eq5XtjcLUwossX4pq5S09CpeLL7o+ZfQIHFuAlUrYouHMoNAlzRbVN0cM4yBsvQ+SpHPwtAaNLchOYdrBeFc0PVAdSh0FVclInTRo9q1RAOCKiexaL4bECOqscQOS86Mec0t3Ccw1V0SVRUIzTrYo7BLV67kE1ifFMdkTqmpAFMI8lzpvARXJsYcMbbdKuC5pqmVi7AuQf2UZ/JBcDKix0K13H+k98O4aAXHc+wSlZi28EzKwDojBbBJ6DuKE5XlUeqNiou9LCzj1RgbJepqlkwoOhYt0Nnqu0alkPFCWOG+vosmZo+ff6h8ZLAaLZb3WvLpiWuJAA31BlfN6dWO8BMHWLr6b8V8J/ksABioycroJEG5a6Lxp4eZXgncIe14YSATMwCdBfWORTMyPun+m3xJ/Lw7QCAadNrXsIOZtTNDSCdWOaJHUOGy9Nx14AbIkm32Xj/8ATHhTKNFrKQMkipUedXOLCBpo0A2HU817PiUOIGsGV4s2o5tdHak3EU4bTl0kQI/fwmcYZIA0CvmAEIBqAXUpScnZVKkMs+yE59h4qtaplbO5suAaDzW9BGwvBVaWV7m8nH77L3FGpJ6bLy/HacVneR9lfx9WieQ5hitPDNWTQctfCCbquR6EitmxQbZZHxBQDnNnktdh0Wfxp8FqXwX94Pk/1mMyGaaLjcaQSOaNiKzSFi4rERAGx9l7Moo4IyZp0uJkujkinEFzpMRqvP0XO7WI7pWkyk9x0hqVRQW2arMQ4iQoqMFrKJqQLYFuGaNhKJVbDbDxRHmD+6q5HuqExYNA9kZz4ul2VG57nRWqVg63VFM1B61TuylXGyZeO6lQZHgoZOykReoUNj0V4VKboOigULMpXWvT0WcGaQtCnoqQFkUcVRz5uuuQalrwg2ZIs2oq1UMVNl01EjY1Fsy52gKE8jZKuJlLY1HMbwXtAcrnM6A2Pis3h3wFnqDOCWzfqvWYdtgtrANI6KefM4x0Pjxpsrg+G0sMyKNNrJGwEmNATvug4h4b3j8x9AmcZigNfp/f7PkvNYvGZib2nTkPPdeZjhKbOpyUUahxQNgb7qB4+ZxgDbr05rFGLH0j19vFFZUkzUK6FhonzNcVsxzus0fKEB+MmWgy469ByWXWxxee6YaLeHh1RMIIO3ij8VbZuZ6LB7XWP8SMh4PMLXwYWZ8T6s81PG6mPL8TMw4v0Wxg/ZZNC0rZ4cyYTZXoEVs0qAWR8Rsc5zA3rK2aQueS89i8XmqH0VP46F5HL9E/KlUaEf4buaZpcMbrzVsPVmQiU6oaCCfBe0cBxmEaDeIVs4AMDdL1cT3haRuuyC25WACqPuYI9VEu4MnQqJaHs1CzNc6A69UNgl0yYC0OzhpEDf3QWYcAGSjbFoVbSY5xsZ0R6bGt+Ybq9Nu/PoruosLg4zI9Ftm0Cq1mmWDlYrLBh3it0Mp8llY6leUmSL7Gi0CqNS2hTLyli5RY6HGFNg2lJUXyE3NkyAylRUNl14lVe6EjGQtUZMx5hApVxv62nzTDqthzKVxNO0fUZU2Mi73rtLVZtV5ZDSZmT6apjA4oEwfJLY1G1h8RlOkrWq8UbTZJMuI0C806rdCq1Z10CnPGp9jRk10FxuPNR5cbA7craJQmboWIrAXKV7Vzxa0GPUjRFJJUjdmm/FBgP1HkEM5nhr3H6tPFVoURDt5lFov7t+WixhjQ20Kewqy6dWbcrrVwO1lOb0MkbuEWZ8SO7zfBa+HCxfiD5x/t/K5cf5l5dCNBuy9DgaeVsrL4ZhsxW6QB3eS2V3o0EcqGGHw1Xm6eBh0jz6rZ4ricoDRylYr8Y7M0AWm55cl6nhY+GO/2cXkS5ToYoYXUWBXf4Em6KwTvfp+VGVjBzWM+y7rOYq3BiLKlXCgBdp4wBhvBkxZCqVCQ6Hd6LckLDRHU6YNyPVdSFPDOIBdGY6+KiHNjcUP0sXIMAyNWnW+l9Ew+sACeWu5STXwBA5T4INZ5aXODZByzHzawVSiZpF5Vc6VbEODd953hXw4ytAJzECJOp6lEBd1YgxqUCtigRexmIVql3AX0JnZLYzDZtyOs6JZdDR7ONdoN+8PeUGtZZ9Wu6m4F3IgkmJgiSOv/AGjuxbcszJPouSRZDvC3zmEWWhCx+CYppe4CfaPVbNU7IroHsBVcln1EyaSBVww1U2mOmhY1N1AQbnWT7pqlRpg3n1TZwdJ25CXiw2jErgEgnaQsas003Zr/ADafb2XrTgKcmXSPforPwOHyQ4OLiQZmIjlHilaYyaMf+WC3MN0GvV/fdaQoYYfMwgDcvcPseiK+rw4gM7UNdII7035d7mCklJr0NFJ+zyT6vaVCPpafU8/ValEd0RzTON4G2kM9M5genPfwug022Q5JqwtUFExAUDIH3KLQok+CcpUaY1bOm61MwnghNvTmt7B0CBcaJrC4Wk4S0QU0KULmnJ9FYovQEBZnHW3Y7xC1WJTilIFt7Xt48lOHY8ujvDe60lHfVAZmOp0HVJYd0ATYblSvWaSJPgujDhUnbJTyUqRlYxrqkk2cDHkqsoOENmROsewWlIkQBqNT6o7CBMcyV6ar0cgt2fekTGmm/VQ4Mmb6n+kxmMzJQ3B5nUJuQvEq/BwCQJIBgfhc/iNMOIOaOfyzEhWqZrSd9rKtSoANbo2ahapWLSR2TjG4IgqI2cqLWw0ApDMJabem6q6kZNiQCBpEzuCdglDxhraYd3o0ggh1toNyeiQx/FnPa5jabyTMwYIkbE7q1kaNJlN5qE5mhocWxGpj8KzqZkg2GxHPwSHDMYcoBbVBkyH3g6fMdRbbmnhWOYAtNxM2IB5eKxg4p9VKjZt7qocInaP8IhPoUGrCnRi8Q4J2jTLt7QfX2XnuM4Cph290lzDHdNzflG6920AWnTTz5+6pWotIuJuNvD8Kbxqh+bs+ccCxlRtdjcjoLwDrInlP5X04FBbhKYmGjY6fvJFpHX92Sca0G7JlSmKMyN7p5xss+ozVCRkAH76FcL3aSfJcpxMePsYVi68dR6SpNDlHVCOp3RjUlDm4/d1emywHT1QoIOowOs5oMcx6hWosZTHdDWf7WgE+itkEwT19I/tAZNR+WYbB0AJPKSdPBZRNY3TxhmMxeDt3dD0OqHQwbcx5AmyR4Xw7sXONSqXuJ7oOUZWzDZI3hb1RgI7sT0n7KbjsdS0K4hzRZtghNF0R1PciPNda2TaxGyLAaODqQY8FushzZWBh6ZMEfpWzhDF9j7Ljy9nRAsbFL8Ubmpkja/oj4lyBm2O6nxsezOwVdrmkF0INVrgQHQbeo5pTF8NqNAyOAM6kGbmAJggCJ2WpQw1QUznh7mzly2m1hfddeKLjpkZ09oBc/SDGiMx2doc1wg3BiRb9KJQoONIZ+48t72UiQY2N/wApPD4FtMktOrjMuc8lsWME2Mro5EqNRoMc0rh2TUqPD5kNbF4BbMxtuh1aroLG1C12W1RrZIfJJMXAFtDzVH45sl5s8gTF53PK06I83fQOOhvIXEggiDbS9pkQevsrij0Sr+IaRufwVRmKqQTlBO14DhOx219lRMUd7LookaOJqEaONz9A5n/yXEbBRjMLGgjMwZPm0ESPqJ+6W4jTcZy1Mttdo8iDvqOS1qXD2NaWtAE623gCTOum6J/Ebqdv2V1NaIWYVLEvzAOgskTa4i4m/QXWiKge8GG90yCReSI021KPXw7W7TJzGdA1tyB/Xij1KAuIm0adCeSFGszcTVMm5AhxkW+WNv8A2901hzoCBJbmcfGd/P2SOJq2YIBGWnmvEZtbddBMfaS16mUF7b2cOZPZ/QCZgh+a8GyWwjXaOEEye9lNtjYW5z+V1+JmQJgwBYiD5gc/2bY1TG3e6cswTMzJAgZSe7e3rpKfqYjNRvaXxYC97kieUmPDohYaNUkEjfuuP/H1+ZK9vlOsDQiN9j+80Wk8drBJltIcxILoEjxB01nyXH1GVHQzI4Aua94eCWPAByFoBk30JELSjZkyvbnLOusx+3Qn1QQSChig6lMCWGNPpO5jlos3E2BLSd9DpHLYi+ijK12UQy98Pg76eMi3oPZdxAgZhsQesSJHosPF4+WgkxlcJI5c+hHLxVhxXMCwBz3aQwTbQ6fvgkoJqVMReRfl6g/2mO3MWH+VkNNSBDHWAiQdb30nUEeaA7igsJg6lp1ERbqOSEkwo1sXX2Ek7ctJI+y7woOIJJGcg97UNuQLE3Kx6mNa9sDaSSDqJkK9DiraedtUgdwuIM7QBIAndAw/huLto1uza3O8Tne6C/qZ+kdF6Oh8R0HQHATpLb+v7uvJ16FnNptY0m8gQXEjVxMlX4NwxtFsOeHvmSdgegQdSDtHsOIdiWyHG14MA+yHwvClxDphpgQTJPiCJi2q8jx3ihptMHQTz8AfE/ZbHwpisrA8lxzQSTr1sdtVPJB8dDQlvZ6mnhch7twTfo7W3T+kRz4bPQLmHx1M3nUiPEnX1WfV4k3OGi4cOe95HsuOOOTdM6HJLoYxGJFj1Hv/AJUFSG5iL8pCSqUouCDDoix3jWdbFR+Mh0QJnuyRewO2wne9rXIXRHC0qJ/J7CcPrMqMz07td3gBIPPQxBK5iMaYIFB5loMOIaCDq2ZID7ix9UajFRhDmtky1waSRytpIhVr0mvBptcQQBOV3ebYRrMW36q6x6Ecyld/dY4syw3QvcCMw0hs5jbT0V67JgBmpIJm4EEgix3geaFhsAGNyuc55nNL3TGUQ2J02M87olPDuaxzGugukh4ElpdqYdIN5MaaBP8AGLzBYTDtY2GjUTNpJsZMACUuyQx0NzGHQ4kF02gGRGpMeAWhTblBJ+Y3cQCASLSBNiQjUmw1onlPkP7TKArkY3Dqz87s4DgHFsNYQQNRqYJjLJHony+HRl5GAdhmv02HmuYJwLc8mZA6aAR9ku+qe3i/ynlqDYepJ8CtxpGsjqlQaQB4/wDa6nKRgQ5wm+gEa216KI8WaxAvhdFSNftsuqLqs5wGIdIBGrcpPUG0D92S7sQSC1p03EgwWwBPkfZRRJF2x5KhQYGS8RFgG6RlnkOlvNXw2EJHeMElwMXvml0k+JHgoonSQti2O4cSHCnmJg3LmxrvubT/ANaodDDv1D5aXFxkWsLwPFgHn4zFErirDZqYdr+0LnixhwLSCDlBHem/1E/+3S5sJiGHOWASHuz2jvAkGTF91FE3ugegdPibjfI3KavZg5j8swXRl1kER7pfjdKnLT3WOkEvyBxDZ7xAIIkxCiiV/iMuw2PwYlxFJrgWkkEjvOFmtg6f7p8kTheEY+mMona8yCNs2ttJUUWemZdDFag9ramYAkaAG5y3BNoBt7BZlTgFKq5r6zRnLe8G2GY6mRfQRqoohVpAuirPg+gJgPE6xUePcGf8LOofBFEQXNfmMk//AKl++gcQDGiiizgjKTHBgJeMsm0uJIluobPMEg6E6Lr+FVQSWNb1JcuKKEcaltlZSa0JO4e+oS14vcySC05HQdDM6EeC2KPDnBjWSW7SHGfU3Pmoom+KNA5s0Bg+5BcfHQ+y5QphrrAAZY0E2MEg7bepUUTqEULyZ3H03FvdZmsARnySBOUAwbyV3h9NxaS4AEm41gchG8/2ootwVm5Oh2nimteWZhMAkQ7QzBnQmZV6gHec3KHEakTpcTcEi53UUQSCylZ7g3ukFwicwMHSdN1arWgE3MbDf1UUTULYuK+dkhpBc02MSCecSPRcNV09I015b+XuooikjNir5E3+Y6RuGgD/AIhUexs5ovz39VFEySFsXDzuTqfuooosE//Z'
							alt='polar-bear'
						></img>
					</div>
				)}
			</div>
		</div>
	);
};
